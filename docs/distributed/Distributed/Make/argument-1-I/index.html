<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>1-I (distributed.Distributed.Make.1-I)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">distributed</a></span></nav><header><h1><span class="keyword">Parameter</span> <span class="module-path">Distributed.Make.1-I</span></h1></header><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a t</code><code></code><code></code></div><div class="doc"><p>The monadic light weight thread type returning value <code class="code">'a</code>.</p></div></div><div class="spec type" id="type-stream"><a href="#type-stream" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a stream</code><code></code><code></code></div><div class="doc"><p>An unbounded stream holding values of <code class="code">'a</code>.</p></div></div><div class="spec type" id="type-input_channel"><a href="#type-input_channel" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>input_channel</code><code></code><code></code></div><div class="doc"><p>A type to represent a non-blocking input channel</p></div></div><div class="spec type" id="type-output_channel"><a href="#type-output_channel" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>output_channel</code><code></code><code></code></div><div class="doc"><p>A type to represent a non-blocking output channel</p></div></div><div class="spec type" id="type-server"><a href="#type-server" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>server</code><code></code><code></code></div><div class="doc"><p>A type to represent a server</p></div></div><div class="spec exception" id="exception-Timeout"><a href="#exception-Timeout" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Timeout</span></code></div><div class="doc"><p>Exception raised by <a href="index.html#val-timeout">timeout</a> operation</p></div></div><div class="spec type" id="type-level"><a href="#type-level" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>level</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-level.Debug" class="anchored"><td class="def constructor"><a href="#type-level.Debug" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Debug</span></code></td></tr><tr id="type-level.Info" class="anchored"><td class="def constructor"><a href="#type-level.Info" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Info</span></code></td></tr><tr id="type-level.Warning" class="anchored"><td class="def constructor"><a href="#type-level.Warning" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Warning</span></code></td></tr><tr id="type-level.Error" class="anchored"><td class="def constructor"><a href="#type-level.Error" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Error</span></code></td><td class="doc"><p>(** Type to represent levels of a log message. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-lib_name"><a href="#val-lib_name" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>lib_name : string</code></div><div class="doc"><p>The name of the implementation, for logging purposes.</p></div></div><div class="spec val" id="val-lib_version"><a href="#val-lib_version" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>lib_version : string</code></div><div class="doc"><p>The version implementation, for logging purposes.</p></div></div><div class="spec val" id="val-lib_description"><a href="#val-lib_description" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>lib_description : string</code></div><div class="doc"><p>A description of the implementation (e.g., the url of the code repository ), for logging purposes.</p></div></div><div class="spec val" id="val-return"><a href="#val-return" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>return : <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">return v</code> creates a light weight thread returning <code class="code">v</code>.</p></div></div><div class="spec val" id="val-(&gt;&gt;=)"><a href="#val-(&gt;&gt;=)" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>(&gt;&gt;=) : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">bind t f</code> is a thread which first waits for the thread <code class="code">t</code> to terminate and then, if the thread succeeds,
behaves as the application of function <code class="code">f</code> to the return value of <code class="code">t</code>. If the thread <code class="code">t</code> fails, <code class="code">bind t f</code> also fails,
with the same exception.</p></div></div><div class="spec val" id="val-fail"><a href="#val-fail" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fail : exn <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">fail e</code> is a thread that fails with the exception <code class="code">e</code>.</p></div></div><div class="spec val" id="val-catch"><a href="#val-catch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>catch : (unit <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a>) <span class="keyword">&#8209;&gt;</span> (exn <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">catch t f</code> is a thread that behaves as the thread <code class="code">t ()</code> if this thread succeeds.
If the thread <code class="code">t ()</code> fails with some exception, <code class="code">catch t f</code> behaves as the application of <code class="code">f</code> to this exception.</p></div></div><div class="spec val" id="val-async"><a href="#val-async" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>async : (unit <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a>) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">async f starts</code> a thread without waiting for the result.</p></div></div><div class="spec val" id="val-create_stream"><a href="#val-create_stream" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create_stream : unit <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-stream">stream</a><span class="keyword"> * </span>(<span class="type-var">'a</span> option <span class="keyword">&#8209;&gt;</span> unit)</code></div><div class="doc"><p><code class="code">create ()</code> returns a new stream and a push function.</p></div></div><div class="spec val" id="val-get"><a href="#val-get" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get : <span class="type-var">'a</span> <a href="index.html#type-stream">stream</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">get st</code> removes and returns the first element of the stream, if any. Will block if the stream is empty.</p></div></div><div class="spec val" id="val-stream_append"><a href="#val-stream_append" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>stream_append : <span class="type-var">'a</span> <a href="index.html#type-stream">stream</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-stream">stream</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-stream">stream</a></code></div><div class="doc"><p><code class="code">stream_append s1 s2</code> returns a <code class="code">stream</code> which returns all elements of <code class="code">s1</code>, then all elements of <code class="code">s2</code>.</p></div></div><div class="spec val" id="val-close_input"><a href="#val-close_input" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>close_input : <a href="index.html#type-input_channel">input_channel</a> <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">close ch</code> closes the given channel immediately.</p></div></div><div class="spec val" id="val-close_output"><a href="#val-close_output" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>close_output : <a href="index.html#type-output_channel">output_channel</a> <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">close ch</code> closes the given channel. It performs all pending actions, flushes it and closes it.</p></div></div><div class="spec val" id="val-read_value"><a href="#val-read_value" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read_value : <a href="index.html#type-input_channel">input_channel</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">read_value ic</code> reads a marshalled value from <code class="code">ic</code>.</p></div></div><div class="spec val" id="val-write_value"><a href="#val-write_value" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>write_value : <a href="index.html#type-output_channel">output_channel</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;flags:Marshal.extern_flags list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">write_value oc ?flags x</code> marshals the value <code class="code">x</code> to <code class="code">oc</code>.</p></div></div><div class="spec val" id="val-open_connection"><a href="#val-open_connection" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_connection : Unix.sockaddr <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-input_channel">input_channel</a><span class="keyword"> * </span><a href="index.html#type-output_channel">output_channel</a>) <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_connection addr</code> opens a connection to the given address and returns two channels for using it.</p></div></div><div class="spec val" id="val-establish_server"><a href="#val-establish_server" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>establish_server : ?&#8288;backlog:int <span class="keyword">&#8209;&gt;</span> Unix.sockaddr <span class="keyword">&#8209;&gt;</span> (Unix.sockaddr <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-input_channel">input_channel</a><span class="keyword"> * </span><a href="index.html#type-output_channel">output_channel</a>) <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-server">server</a> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">establish_server ?backlog sockaddr f</code> creates a server which will listen for incoming connections.
New connections are passed to <code class="code">f</code>. Note that <code class="code">f</code> must not raise any exception. Backlog is the argument passed to Lwt_unix.listen.</p></div></div><div class="spec val" id="val-shutdown_server"><a href="#val-shutdown_server" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>shutdown_server : <a href="index.html#type-server">server</a> <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">shutdown_server server</code> will shutdown <code class="code">server</code>.</p></div></div><div class="spec val" id="val-log"><a href="#val-log" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>log : <a href="index.html#type-level">level</a> <span class="keyword">&#8209;&gt;</span> (unit <span class="keyword">&#8209;&gt;</span> string) <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">log level message_formatter</code> logs a message at the specified level using the formatter provided.</p></div></div><div class="spec val" id="val-sleep"><a href="#val-sleep" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sleep : float <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">sleep d</code> is a thread that remains suspended for <code class="code">d</code> seconds and then terminates.</p></div></div><div class="spec val" id="val-timeout"><a href="#val-timeout" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>timeout : float <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">timeout d</code> is a thread that remains suspended for <code class="code">d</code> seconds and then fails with â€‹<span class="exception">:Timeout</span>.</p></div></div><div class="spec val" id="val-pick"><a href="#val-pick" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pick : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">pick l</code> behaves as the first thread in l to terminate. If several threads are already terminated, one is chosen at random. Cancels all sleeping threads when one terminates.</p></div></div><div class="spec val" id="val-at_exit"><a href="#val-at_exit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>at_exit : (unit <span class="keyword">&#8209;&gt;</span> unit <a href="index.html#type-t">t</a>) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">at_exit fn</code> will call fn on program exit.</p></div></div></body></html>